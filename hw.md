# Описание ДЗ

---
## ДЗ №1
Заготовка для социальной сети
Цель: В результате выполнения ДЗ вы создадите базовый скелет социальной сети, который будет развиваться в дальнейших ДЗ. В данном задании тренируются навыки: - декомпозиции предметной области; - построения элементарной архитектуры проекта
Требуется разработать создание и просмотр анект в социальной сети.

Функциональные требования:
- Авторизация по паролю.
- Страница регистрации, где указывается следующая информация:
1) Имя
2) Фамилия
3) Возраст
4) Пол
5) Интересы
6) Город
- Страницы с анкетой.

Нефункциональные требования:
- Любой язык программирования
- В качестве базы данных использовать MySQL
- Не использовать ORM
- Программа должна представлять из себя монолитное приложение.
- Не рекомендуется использовать следующие технологии:
1) Репликация
2) Шардинг
3) Индексы
4) Кэширование

Верстка не важна. Подойдет самая примитивная.
Разместить приложение на любом хостинге. Например, heroku.

ДЗ принимается в виде исходного кода на github и демонстрации проекта на хостинге.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
Есть возможность регистрации, создавать персональные страницы, возможность подружиться, список друзей.
Отсутствуют SQL-инъекции.
Пароль хранится безопасно.
Рекомендуем сдать до: 17.04.2020

---
## ДЗ №2
Цель: Разработает тестовый скрипт нагрузочного тестирования, проведет тестирование, проанализирует результаты.
1. По полученным навыкам на вебинаре - разработайте скрипт работы с сайтом яндекса:
- переход на главную страницу
- переход в раздел картинок
- поиск картинки "котики" (или любой другой)
- переход на найденному url из ответа системы
2. Проведите нагрузочный тест в несколько потоков в течение не менее 10 минут
3. Проанализируйте полученный результат и дайте ответ на вопрос - какие выводы можно сделать по результатам? Оформите выводы в виде краткого отчета
Критерии оценки: скрипт разработан по указанным шагам, результат предоставлен в виде отчета с выводами - что "ответил" Яндекс на мини-тест.
Рекомендуем сдать до: 17.04.2020

---
## ДЗ №3
Производительность индеков
Цель: В результате выполнения ДЗ вы создадите набор тестовых данных для проведения нагрузочного тестирования, подберете наиболее подходящие индексы и проведете тесты производительности. В данном задании тренируются навыки: - генерация тестовых данных; - работа с индексами; - нагрузочное тестирование;
1) Сгенерировать любым способ 1,000,000 анкет. Имена и Фамилии должны быть реальными (чтобы учитывать селективность индекса)
2) Реализовать функционал поиска анкет по префиксу имени и фамилии (одновременно) в вашей социальной сети (запрос в форме firstName LIKE ? and secondName LIKE ?). Сортировать вывод по id анкеты. Использовать InnoDB движок.
3) С помощью wrk провести нагрузочные тесты по этой странице. Поиграть с количеством одновременных запросов. 1/10/100/1000.
4) Построить графики и сохранить их в отчет
5) Сделать подходящий индекс.
6) Повторить пункт 3 и 4.
7) В качестве результата предоставить отчет в котором должны быть:
- графики latency до индекса;
- графики throughput до индекса;
- графики latency после индекса;
- графики throughput после индекса;
- запрос добавления индекса;
- explain запросов после индекса;
- объяснение почему индекс именно такой;

ДЗ принимается в виде отчета по выполненной работе.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
Правильно выбраны индексы.
Нагрузочное тестирование проведено и результаты адекватны.
Рекомендуем сдать до: 24.04.2020

---
## ДЗ №4
Настройка репликации
Цель: В результате выполнения ДЗ вы настроите репликацию и протестируете ее влияние на производительность системы. В данном задании тренируются навыки: - администрирование MySQL; - настройка репликации; - проведение нагрузочных тестов;
1) Настраиваем асинхронную репликацию.
2) Выбираем 2 любых запроса на чтения (в идеале самых частых и тяжелых по логике работы сайта) и переносим их на чтение со слейва.
3) Делаем нагрузочный тест по странице, которую перевели на слейв до и после репликации. 
Замеряем нагрузку мастера (CPU, la, disc usage, memory usage).
4) ОПЦИОНАЛЬНО: в качестве конфига, который хранит IP реплики сделать массив для легкого добавления реплики. 
Это не самый правильный способ балансирования нагрузки. Поэтому опционально.

ДЗ принимается в виде исходного кода на github и отчета по выполненной работе.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
В отчете корректно описано, как настроена репликация.
2 запроса переведено на чтение со слейва.
Нагрузочное тестирование показало, что нагрузка перешла на слейв.
Рекомендуем сдать до: 15.05.2020


---
## ДЗ №5
Полусинхронная репликация
Цель: В результате выполнения ДЗ вы настроите полусинхронную репликацию и убедитесь, 
что теперь вы не теряете транзакции в случае аварии. 
В данном задании тренируются навыки: 
- обеспечение отказоустойчивости проекта; - администрирование MySQL.
1) Настроить 2 слейва и 1 мастер.
2) Включить row-based репликацию.
3) Включить GTID.
4) Настроить полусинхронную репликацию.
5) Создать нагрузку на запись в любую тестовую таблицу. На стороне, которой нагружаем считать, сколько строк мы успешно записали.
6) С помощью kill -9 убиваем мастер MySQL.
7) Заканчиваем нагрузку на запись.
8) Выбираем самый свежий слейв. Промоутим его до мастера. Переключаем на него второй слейв.
9) Проверяем, есть ли потери транзакций.

Результатом сдачи ДЗ будет отчет в текстовом виде, где вы отразите как вы выполняли каждый из пунктов.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
В отчете описано как включить row-based репликацию и GTID
Проведен эксперимент по потере и непотере транзакций при аварийной остановке master.
Рекомендуем сдать до: 22.05.2020


--
## ДЗ №6
Масштабируемая подсистема диалогов
Цель: "В результате выполнения ДЗ вы создадите базовый скелет микросервиса, который будет развиваться в дальнейших ДЗ. В данном задании тренируются навыки: - декомпозиции предметной области; - построения элементарной архитектуры проекта"
Необходимо написать систему диалогов между пользователями. Обеспечить горизонтальное масштабирование хранилищ на запись с помощью шардинга. Предусмотреть:
- Возможность решардинга
- “Эффект Леди Гаги” (один пользователь пишет сильно больше среднего)
- Наиболее эффективную схему.

ДЗ принимается в виде исходного кода на github и отчета по выполненной работе.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
Верно выбран ключ шардирования с учетом "эффекта Леди Гаги"
В отчете описан процесс решардинга без даунтайма
Рекомендуем сдать до: 31.05.2020


--
## ДЗ №7
Репликация из MySQL в tarantool
Цель: В результате выполнения ДЗ вы настроите репликацию из MySQL в tarantool, а также напишите запрос на lua. В данном задании тренируются навыки: - администрирование MySQL; - администрирование tarantool; - разработка хранимых процедур для tarantool.
1) Выбрать любую таблицу, которую мы читаем с реплик MySQL.
2) С помощью программы https://github.com/tarantool/mysql-tarantool-replication настроить реплицирование в tarantool (лучше всего версии 1.10).
3) Выбрать любой запрос и переписать его на lua-процедуру на tarantool.
4) Провести нагрузочное тестирование, сравнить tarantool и MySQL по производительности.

ДЗ сдается в виде ссылки на гитлаб и отчета о выполнении ДЗ.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
Репликация из MySQL в tarantool работает.
Хранимые процедуры в tarantool написаны корректно.
Хранимые процедуры выполнены по code style на примере репозитория Mail.Ru.
Нагрузочное тестирование проведено.
Рекомендуем сдать до: 05.06.2020


--
## ДЗ №8
Лента новостей социальной сети
Цель: В результате выполнения ДЗ вы создадите ленту новостей социальной сети 
В данном задании тренируются навыки: 
- работа с кешами; 
- работа с очередями; 
- проектирование масштабируемых архитектур.
Разработать ленту новостей. 
Создается отдельная страница, куда пишутся все обновления друзей. 
Для этого нужно хранить подписчиков. 
Лента формируется на уровне кешей. 
Формирование ленты производить через постановку задачи в очередь на часть подписчиков, чтобы избежать эффекта леди Гаги. 
В ленте держать последние 1000 обновлений друзей. Лента должна кешироваться.

ДЗ сдается в виде ссылки на гитлаб и демонстрации работающего проекта, развернутого в интернете.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
Верно работает инвалидация кеша.
Обновление лент работает через очередь.
Есть возможность перестройки кешей из СУБД.
Рекомендуем сдать до: 14.06.2020


--
## ДЗ №9
Сравнительное тестирование ClickHouse и MySQL
Цель: В результате выполнения ДЗ вы построите аналитический отчет в MySQL и ClickHouse, а также сравните их производительность. В данном задании тренируются навыки: - работа с ClickHouse; - выбор СУБД в зависимости от задачи;
1) Сделать копию таблицы пользователей из MySQL в Clickhouse.
2) Сделать отчет по распределению пользователей по возрасту и полу на MySQL и Clickhouse.
3) Сравнить время построения отчета. Объяснить результат.

ДЗ сдается в виде отчета, в котором описаны шаги выполнения задания.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
Описан процесс переноса данных из MySQL в Clickhouse.
Описан запрос получения аналитики, а также индексы в обеих СУБД.
Индексы должны быть корректными.
Тестирование должно быть корректно.
Полученный результат времени выполнения должен быть адекватен.
Рекомендуем сдать до: 21.06.2020


-- 
## ДЗ №10
Онлайн обновление ленты новостей
Цель: В результате выполнения ДЗ вы научитесь обновлять ленту новостей без перезагрузки страницы. 
В данном задании тренируются навыки: - работа с WebSocket;
Разработать компонент, куда будет подключаться клиент при открытии страницы ленты. 
Сервис должен слушать очередь обновлений ленты. При получении подписанным клиентом сообщения, отправлять его в браузер по WebSocket. 
Учесть возможность масштабирования сервиса. 
То есть сообщение должно доставляться только на тот экземпляр компонента, куда соединен клиент. 
Для этого можно использовать, например Routing Key из Rabbitmq.

ДЗ принимается в виде исходного кода на github, документации по архитектуре 
и демонстрации работоспособности развернутого в интернете приложения.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
При добавлении поста у друга, лента должна обновляться автоматически (с небольшой задержкой).
Корректная работа сервиса вебсокетов.
Линейная масштабируемость сервиса вебсокетов.
Описан процесс масштабирования RabbitMQ.
Рекомендуем сдать до: 03.07.2020

-- 
## ДЗ №11
Разделение монолита на сервисы
Цель: В результате выполнения ДЗ вы перенесете бизнес-домен монолитного приложения в отдельный сервис. В данном задании тренируются навыки: - декомпозиции предметной области; - разделение монолитного приложения; - работа с HTTP; - работа с REST API и gRPC;
Вынести систему диалогов в отдельный сервис.
Взаимодействия монолитного сервиса и сервиса чатов реализовать на Rest API или gRPC.
Организовать сквозное логирование запросов.
Предусмотреть то, что не все клиенты обновляют приложение быстро и кто-то может ходить через старое API.

ДЗ сдается в виде исходного кода на github и отчета по устройству системы.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
Описан протокол взаимодействия.
Поддержаны старые клиенты.
Новые клиенты верно ходят через новый API.
Рекомендуем сдать до: 10.07.2020

-- 
## ДЗ №12
Отказоустойчивость приложений
Цель: В результате выполнения ДЗ вы уменьшите число точек отказа в вашем приложении. В данном задании тренируются навыки: - проектирование отказоустойчивых архитектур; - настройка nginx; - настройка HAProxy.
Балансировка HTTP (nginx или haproxy)
- Поднять несколько инстансов приложения и обеспечить HTTP балансировку
- Под нагрузкой с помощью "kill -9" отключить один из инстансов бэкенда.
- Убедится, что система осталась работоспособной.

Балансировка TCP (nginx или haproxy)
- Поднять несколько слейвов MySQL
- Настроить TCP балансировку для MySQL
- Воспроизвести нагрузку.
- Под нагрузкой с помощью "kill -9" отключить один из слейвов MySQL.
- Убедится, что система осталась работоспособной.

ДЗ принимается в виде отчета по выполненным пунктам.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
В отчете верно описана конфигурация haproxy.
В отчете верно описана конфигурация nginx.
В отчете верно описаны условия эксперимента.
В отчете должны быть логи работы системы.
Рекомендуем сдать до: 12.07.2020


-- 
## ДЗ №13
Сервис счетчиков
Цель: В результате выполнения ДЗ вы создадите сервис счетчиков. Сервис будет хранить такие счетчики, как число непрочитанных сообщений. В данном задании тренируются навыки: - разработка отказоустойчивых сервисов; - использование кешей.
1. Разработайте сервис счетчиков.
2. Учтите то, что на этот сервис будет большая нагрузка, особенно на чтение.
3. Продумайте, как обеспечить консистентность между счетчиком и реальным числом непрочитанных сообщений. Например, используйте паттерн SAGA.
4. Внедрите сервис для отображения счетчиков.

ДЗ сдается в виде демонстрации работоспособности сервиса, ссылки на репозиторий github, отчета по архитектуре.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
Верно описан выбранный паттерн обеспечения консистентности.
Выбранная архитектура сервиса подходит для решения задачи.
Рекомендуем сдать до: 19.07.2020


-- 
## ДЗ №14
Внедрение docker и consul
Цель: В результате выполнения ДЗ вы интегрируете в ваш проект социальной сети docker и auto discovery сервисов с помощью consul В данном задании тренируются навыки: - использование docker; - использование consul; - построение auto discovery;
1) Обернуть сервис диалогов в docker
2) Развернуть consul в вашей системе
3) Интегрировать auto discovery в систему диалогов
4) Научить монолитное приложение находить и равномерно нагружать все поднятые узлы сервиса диалогов
5) Опционально можно использовать nomad

ДЗ сдается в виде репозитория с исходными кодами на github и отчетом о выполненных шагах.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
Верно настроен docker.
Обеспечено распределение нагрузки по экземплярам сервиса.
Описан процесс развертки новых экземпляров.
Рекомендуем сдать до: 02.08.2020


-- 
## ДЗ №15
Мониторинг
Цель: В результате выполнения ДЗ вы организуете мониторинг своего сервиса чатов. 
В данном задании тренируются навыки: 
- эксплутация prometheus; 
- эксплутация grafana; 
- эксплутация zabbix;
Необходимо:
- развернуть zabbix;
- развернуть prometheus;
- развернуть grafana;
- начать писать в prometheus бизнес-метрики сервиса чатов по принципу RED;
- начать писать в zabbix технические метрики сервера с сервисом чатов;
- организовать дашборд в grafana.

ДЗ сдается в виде отчета со скриншотами.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
Сбор технических метрик осуществляется верно.
Сбор бизнес метрик осуществляется верно по принципу RED.
В grafana организован дашборд.
Рекомендуем сдать до: 09.08.2020


-- 
## ДЗ №16
Анализ чужого сервиса
Цель: В результате выполнения ДЗ вы напишите отчет об аудите крупного сервиса 
В данном задании тренируются навыки: 
- поиск проблем масштабировании; 
- поиск единых точек отказа; 
- проведение аудита архитектуры
1) Выберите любой иностранный крупный сервис, например, netflix, dropbox, twitch, gmail.
2) По открытым источникам составьте схему компонентов, которые используются в сервисе.
3) Проанализируйте по открытым источникам, как происходит резервирование и масштабирование проекта
4) По открытым источникам найдите примеры инцидентов, которые происходили в системе и проанализируйте причины этих инцидентов.

ДЗ принимается в виде отчета-анализа.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
Составлен список источников.
Есть диаграмма взаимодействия компонентов.
Адекватно описан процесс масштабирования.
Найдены недостатки архитектуры.
Рекомендуем сдать до: 16.08.2020


-- 
## ДЗ №17
Анализ своего сервиса социальной сети
Цель: В результате выполнения ДЗ вы напишите отчет об аудите собственного сервиса 
В данном задании тренируются навыки: - поиск проблем масштабировании; 
- поиск единых точек отказа; 
- проведение аудита архитектуры
1) Составьте схему компонентов, которые используются в сервисе.
2) Проанализируйте потенциальные проблемы в резервировании и масштабировании проекта.
3) Напишите distaster recovery plan для 2 любых компонентов системы.

ДЗ принимается в виде отчета-анализа.
Критерии оценки: Оценка происходит по принципу зачет/незачет.

Требования:
Есть диаграмма взаимодействия компонентов.
Адекватно описан процесс масштабирования.
Найдены недостатки архитектуры.
Distaster recovery plan верно написан.
Рекомендуем сдать до: 30.08.2020
